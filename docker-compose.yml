---
sabnzbd:
  image: kohlby/sabnzbd
  hostname: sabnzbd
  domainname: kohlby.fr
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
    - /mnt/docker/sabnzbd:/data
    - /mnt/media:/media
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.sabnzbd
  cap_add:
    - SYS_ADMIN
  user: root
  ports:
    - 8080:8080
sickrage:
  image: kohlby/sickrage
  hostname: sickrage
  domainname: kohlby.fr
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
    - /mnt/docker/sickrage:/data
    - /mnt/media:/media
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.sickrage
  cap_add:
    - SYS_ADMIN
  user: root
  ports:
    - 8081:8081
couchpotato:
  image: kohlby/couchpotato
  hostname: couchpotato
  domainname: kohlby.fr
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
    - /mnt/docker/couchpotato:/data
    - /mnt/media:/media
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.couchpotato
  cap_add:
    - SYS_ADMIN
  user: root
  ports:
    - 5050:5050
plex:
  image: kohlby/plex
  net: host
  domainname: kohlby.fr
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
    - /mnt/docker/plex:/data
    - /mnt/media:/media
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.plex
  cap_add:
    - SYS_ADMIN
  user: root
  ports:
    - 32400:32400
nginx:
  image: kohlby/nginx
  hostname: www
  domainname: kohlby.fr
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.nginx
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
  cap_add:
    # shr exec
    - SYS_ADMIN
  user: root
  ports:
    - 80:80
    - 443:443
timemachine:
  image: kohlby/timemachine
  hostname: timemachine
  domainname: kohlby.fr
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.timemachine
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
    - /mnt/timemachine:/mnt/timemachine
    - /mnt/media:/mnt/media
    - /mnt/legacy:/mnt/legacy
    - /mnt/pictures:/mnt/pictures
  cap_add:
    # shr exec
    - SYS_ADMIN
    # netatalk
    - SYS_RESOURCE
  user: root
  ports:
    - 548:548
avahi:
  image: kohlby/avahi
  net: host
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.avahi
  user: root
  stdin_open: true
  tty: true
resume:
  image: kohlby/resume
  hostname: resume
  domainname: kohlby.fr
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.resume
  cap_add:
    # shr exec
    - SYS_ADMIN
  user: root
  ports:
    - 4000:4000
airsonos:
  image: kohlby/airsonos
  net: host
  log_driver: "syslog"
  log_opt:
    syslog-tag: compose.airsonos
  user: root
  stdin_open: true
  tty: true
vpn:
  image: kohlby/vpn
  hostname: vpn
  domainname: kohlby.fr
  volumes:
    - /opt/ejson/keys:/opt/ejson/keys:ro
  cap_add:
    # shr exec
    - SYS_ADMIN
    # openvpn
    - NET_ADMIN
  user: root
  stdin_open: true
  tty: true
  ports:
    - 1194:1194/udp
gitlab:
  image: gitlab/gitlab-ce
  hostname: gitlab
  domainname: kohlby.fr
  volumes:
    - /mnt/docker/gitlab/config:/etc/gitlab
    - /mnt/docker/gitlab/logs:/var/log/gitlab
    - /mnt/docker/gitlab/data:/var/opt/gitlab
  ports:
    - '8443:443'
    - '8090:80'
    - '2222:22'
